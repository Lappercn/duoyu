# 多鱼理财 (DuoYu Wealth) - 产品文档

**版本**: 1.0.0  
**更新日期**: 2025-11-30  
**定位**: AI Agent 驱动的多智能体投顾与辩论平台

---

## 1. 产品概述

**多鱼理财** 是一款创新的金融科技产品，它利用 AI Agent 技术构建了一个虚拟的“多空辩论”舞台。用户只需输入感兴趣的股票名称，系统即会自动搜集全网情报，并由三个性格迥异的 AI 智能体（机会挖掘官、风险预警官、主持人）针对该标的展开一场激烈的投资辩论，最终生成一份深度分析报告。

### 核心价值
*   **打破信息茧房**：不仅看涨，也看跌，通过正反双方的激烈交锋，呈现更全面的市场图景。
*   **沉浸式体验**：3D 虚拟形象 + 语音合成 + 动态演绎，让枯燥的研报变得生动有趣。
*   **实时情报驱动**：基于实时全网搜索（Bocha Web Search），确保分析的时效性和准确性。

---

## 2. 用户流程 (User Journey)

1.  **入口探索 (Entry)**
    *   用户进入极简风格的首页，背景为动态金融场景。
    *   在胶囊式搜索栏中输入股票名称或代码（如“贵州茅台”）。
    *   选择风险偏好（稳健型/激进型/保守型），并可输入补充的市场线索。
    *   点击“召唤投研团队”启动系统。

2.  **情报搜集 (Intelligence Gathering)**
    *   **首席情报官 (Consultant)** 率先登场。
    *   系统自动规划搜索路径，调用搜索引擎获取最新的股价、新闻、研报和市场情绪。
    *   AI 对海量信息进行清洗和摘要，生成一份“核心情报简报”并展示在左侧仪表盘。
    *   用户确认情报无误后，点击“开始辩论”。

3.  **多空辩论 (The Debate)**
    *   舞台灯光聚焦，**主持人 (Host)** 开场，介绍辩论议题（如：估值争议、行业前景、资金流向）。
    *   **机会挖掘官 (Bull - 多头)**：身着深色西装，性格激进，基于利好数据发表看涨观点，并在模型上表现出兴奋的前倾和摇摆动作。
    *   **风险预警官 (Bear - 空头)**：身着职业装，性格冷静，针对多头观点进行犀利反驳，提示潜在风险。
    *   双方进行 2-3 轮的交锋，语音实时播报，文字实时上屏。

4.  **最终决策 (Final Verdict)**
    *   主持人总结陈词，综合双方观点。
    *   系统生成最终投资建议卡片（强烈买入/观望/卖出）。
    *   展示详细的决策理由（Markdown 格式）。
    *   用户可导出完整的投资分析报告。

---

## 3. 核心功能模块

### 3.1 前端交互 (Frontend)
*   **胶囊式搜索入口**：极简设计，支持模糊搜索，集成风险偏好选择。
*   **3D 虚拟舞台**：基于 Three.js (GLB 模型) 构建，支持模型的呼吸、说话摇摆、前倾等程序化动画。
*   **实时数据看板**：雷达图展示个股的五维评分（情绪、基本面、动量、技术、风险）。
*   **流式对话流**：打字机效果展示辩论实录，支持语音播放（TTS）。
*   **Markdown 报告渲染**：精美排版的最终研报展示。

### 3.2 后端智能 (Backend Intelligence)
*   **Agent Orchestrator (编排器)**：
    *   **Planning**: 动态生成搜索关键词。
    *   **Execution**: 并发执行搜索任务。
    *   **Synthesis**: 整合多源信息生成 Context。
    *   **Debate Loop**: 控制多轮对话的 prompt 注入和状态流转。
*   **Bocha Web Search 集成**：
    *   实时获取股票行情（价格、涨跌幅）。
    *   抓取最新财经新闻和公告。
*   **LLM 服务 (DeepSeek/OpenAI)**：
    *   角色扮演（Role-Playing）：赋予不同 Agent 独特的人格和语言风格。
    *   逻辑推理：基于事实数据生成有理有据的辩论内容。
*   **TTS 服务 (Volcano)**：
    *   多角色音色映射（深沉男声、知性女声等）。
    *   流式语音生成与播放队列管理。

---

## 4. 技术架构简述

*   **前端框架**: Vue 3 + Vite + Pinia + Element Plus
*   **3D 引擎**: Three.js (via Vue组件封装)
*   **动画库**: GSAP (用于 UI 元素和模型入场动画)
*   **后端框架**: Node.js + Express
*   **数据库**: MongoDB (存储分析记录和对话历史)
*   **AI 能力**: 
    *   LLM: DeepSeek V3 / OpenAI GPT-4o (通过适配层调用)
    *   Search: Bocha Web Search API
    *   TTS: 火山引擎 (Volcengine) TTS

---

## 5. 角色设定 (Agent Personas)

| 角色 | 代号 | 职责 | 性格特征 | 语音音色 |
| :--- | :--- | :--- | :--- | :--- |
| **首席情报官** | Consultant | 数据清洗、背景调查 | 客观、严谨、高效 | (文本交互为主) |
| **主持人** | Host | 控场、总结、最终决策 | 权威、公正、宏观 | 渊博小叔 |
| **机会挖掘官** | Bull | 寻找做多逻辑 | 激进、乐观、煽动性强 | 阳光青年 |
| **风险预警官** | Bear | 寻找做空逻辑 | 冷静、怀疑、批判性强 | 知性女声 |

---

## 6. 未来规划 (Roadmap)

*   **多模态输入**：支持上传财报 PDF 直接分析。
*   **用户干预**：允许用户在辩论过程中插入观点，改变辩论走向。
*   **实盘模拟**：接入模拟交易账户，跟踪 AI 推荐的收益率。
*   **更多角色**：引入“技术面大师”、“宏观经济学家”等新角色加入辩论。
